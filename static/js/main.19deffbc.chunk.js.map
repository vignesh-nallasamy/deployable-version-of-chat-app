{"version":3,"sources":["firebase/Fire.js","Context.js","apiCalls/AuthFire.js","components/Base.js","components/Card.js","pages/Home.js","pages/Login.js","apiCalls/Config.js","pages/Signup.js","pages/Signout.js","components/Audio.js","components/InputBox.js","components/Emoji.js","pages/Chat.js","pages/AddFriend.js","pages/AddGroup.js","pages/FriendList.js","pages/GroupList.js","pages/GroupChat.js","pages/BlockList.js","PrivateRoute.js","PublicRoute.js","Routes.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","db","firestore","fireup","storage","ref","MyContext","createContext","signout","collection","doc","currentUser","email","update","online","then","signOut","console","log","Base","name","children","authenticated","useContext","history","useHistory","NavigationBar","className","style","backgroundColor","location","pathname","to","Footers","color","Card","photoUrl","backgroundImage","src","maxHeight","maxWidth","alt","withRouter","useState","reload","setReload","user","setUser","getUser","a","temp","get","item","exists","data","catch","err","useEffect","Login","setemail","password","setpassword","seterr","formSubmit","e","preventDefault","signInWithEmailAndPassword","message","type","required","onChange","target","value","onClick","config","quality","autoRotate","debug","Signup","setname","file","setfile","setErr","loading","setLoading","newImage","readAndCompressImage","Config","resizedImage","createUserWithEmailAndPassword","metadata","contentType","rand","Math","floor","random","toString","uploadTask","child","put","on","snapshot","progress","bytesTransferred","totalBytes","state","error","getDownloadURL","downloadURL","set","friends","notify","test","notifyGroup","groups","usereyyy","alert","files","Signout","Mp3Recorder","MicRecorder","bitRate","Audio","props","start","setState","show","setRecording","isBlocked","isRecording","stop","getMp3","blob","insertAudio","blobURL","navigator","getUserMedia","audio","display","this","onMouseDown","React","Component","InputBox","insertMessage","insertImage","insertVideo","insertDocument","singleMessage","setsingleMessage","emoji","setEmoji","id","htmlFor","accept","onSubmit","cols","rows","Emoji","setChosenEmoji","onEmojiClick","event","emojiObject","prevState","wordWrap","skinTone","SKIN_TONE_MEDIUM_DARK","Chat","useParams","friendemail","chatId","recording","Current","setCurrent","Friend","setFriend","messages","setMessages","preload","current","onSnapshot","element","document","getElementById","scrollTop","scrollHeight","updateScroll","Messages","data2","replace","blockUser","map","blocked","newList","setTimeout","push","FieldValue","arrayUnion","sender","receiver","content","time","Date","lastVal","increment","documentName","displayMessage","href","width","height","controls","putTime","toLocaleString","hour","minute","hour12","mainElement","day","checkDate","date","getDate","borderRadius","month","year","index","key","toDate","onMouseOver","onMouseOut","fontSize","arrayRemove","deleteMessage","recordingMessage","loadingMessage","onlineMessage","AddFriend","irukka","setIrukka","setloading","success","setsuccess","setError","FindUser","makeFriend","count","length","forEach","friend","Duplicate","chat","firstName","firstEmail","secondname","secondEmail","docs","junk","border","AddGroup","setId","seterror","add","icon","members","admin","Id","groupId","total","successMessage","errorMessage","FriendList","backgroundPosition","backgroundSize","backgroundRepeat","notifications","GroupList","setNotifications","where","results","diff","notification","GroupChat","trigger","setTrigger","Members","setMembers","group","setGroup","Arr","removeFromGroup","filter","member","details","groupList","includes","AddAsMember","marginLeft","BlockList","unBlock","PrivateRoute","component","rest","render","from","PublicRoute","Routes","setAuthenticated","userId","setUserId","onAuthStateChanged","uid","Routings","Provider","path","exact","Home","ReactDOM"],"mappings":"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","file":"static/js/main.19deffbc.chunk.js","sourcesContent":["import firebase from \"firebase\"\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyDniaaja7UCB3gv5eslnIt_M_-eQpoU3xc\",\n    authDomain: \"chat-app-d8aff.firebaseapp.com\",\n    databaseURL: \"https://chat-app-d8aff.firebaseio.com\",\n    projectId: \"chat-app-d8aff\",\n    storageBucket: \"chat-app-d8aff.appspot.com\",\n    messagingSenderId: \"66563022708\",\n    appId: \"1:66563022708:web:0bc55a98e3fb4007685621\",\n    measurementId: \"G-P3165M4XHJ\"\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n  firebase.analytics();\n\n   export const auth = firebase.auth;\n   export const db = firebase.firestore()\n   export const fireup = firebase.firestore;\n   export const storage = firebase.storage().ref();\n ","import {createContext} from \"react\"\n\n\nexport const MyContext = createContext(null) ;","\nimport {auth,db} from \"../firebase/Fire\"\nimport { Redirect, useHistory } from \"react-router-dom\"\n\nexport const signout = ()=>{\n\n \n    db.collection(\"users\").doc(auth().currentUser.email).update({\n        online:false\n    }).then(()=>{\n        auth().signOut().then(()=>{\n            console.log(\"Signed out Successfully\")\n        })\n    })\n\n}","import React,{useContext} from 'react'\nimport {Link} from \"react-router-dom\"\nimport {useHistory} from \"react-router-dom\"\nimport {signout} from \"../apiCalls/AuthFire\"\nimport {MyContext}  from  \"../Context\"\n\nfunction Base({\n    name,\n    children\n}) {\n\n    const {authenticated} = useContext(MyContext)\n    let history = useHistory()\n\n\nconst NavigationBar =()=>{\n\n    return(\n       <div>\n           <ul className=\"nav nav-tabs\" style={{backgroundColor:\"#431c5d\"}}>\n               \n\n               \n\n               {!authenticated ? <> \n\n               <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/login\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"/login\">Login</Link>\n               </li>\n\n               <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/signup\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"signup\">Signup</Link>\n               </li>\n                </> : \"\" }\n\n               \n               {authenticated ? <>\n                <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"/\">Home</Link>\n               </li>\n               <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/friendlist\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"/friendlist\">Friends</Link>\n               </li>\n               <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/grouplist\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"/grouplist\">Groups</Link>\n               </li>\n               <li className=\"nav-item\" style={{backgroundColor:history.location.pathname === \"/signout\" ? \"#d0bdf4\" : \"\"}}>\n                   <Link className=\"nav-link text-white\" to=\"/signout\">Signout</Link>\n               </li>\n                \n               \n               </> : \"\"}\n              \n                \n           </ul>\n       </div>\n    )\n    \n    \n}\n\nconst Footers = () =>{\n    return(\n        \n<footer className=\"page-footer font-small\" style={{backgroundColor:\"#431c5d\"}}>\n\n\n<div className=\"footer-copyright text-center py-3\"> 2020 Copyright:\n \n</div>\n\n\n</footer>\n\n    )\n}\n\n\n\n    return (\n        <div >\n        \n        <NavigationBar></NavigationBar>\n        <div className=\"container-fluid\">\n            <div className=\"row \">\n            <div className=\"col-12\">\n            <h1 className=\" text-center \" style={{color:\"black\"}}>{name}</h1>\n\n            </div>\n            </div>\n        </div>\n        <div className=\"container-fluid text-white\" >\n        {children}\n       \n\n       <div className=\"clear\"></div>\n        <Footers></Footers>\n        </div>\n        \n       \n\n        </div>\n    )\n}\n\nexport default Base\n","import React from 'react'\n\nfunction Card({name,email,photoUrl}) {\n    return (\n        <div className=\"card  text-white \" style={{backgroundImage:\"url(https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png)\"}}>\n    \n        <img src={photoUrl} className=\"card-img-top rounded ml-auto mr-auto mt-3 profileDp\" style={{maxHeight:\"300px\",maxWidth:\"300px\"}} alt=\"\"/>\n\n        <div className=\"card-body mt-3   text-center\">\n            \n            \n            <h3 className=\"card-title text-dark border-black border-bottom pb-2\">\n              {name}\n            </h3>\n            <p className=\"card-text text-dark\"> {email}</p>\n        </div>\n            \n        </div>\n    )\n}\n\nexport default Card\n","import React,{useState,useContext,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport {db,auth} from \"../firebase/Fire\"\nimport Card from \"../components/Card\"\nimport {Link,withRouter} from \"react-router-dom\"\n\nfunction Home() {\n\n    \n \nconst [reload, setReload] = useState(false)\n\n\nconst [user, setUser] = useState({\n    name:\"\",\n    email:\"\",\n    photoUrl:\"\"\n})\n\nconst {name,email,photoUrl} = user\n\n const  getUser = async ()=>{\n    \n    const temp =  auth().currentUser \n\n    \n    \n    \n    await db.collection(\"users\").doc(temp.email).get()\n    .then(item => {\n         \n        if(item.exists)\n        {\n            const {name,email,photoUrl} = item.data()\n            setUser({...user,name:name,email:email,photoUrl:photoUrl})\n            \n        }\n        else\n        {\n            console.log(\"undefiend User\");\n            setReload(!reload)\n            \n        }\n    })\n    .catch(err => {\n        console.log(\"home Error \",err);\n        \n    })\n    \n    \n\n}\n\n\nuseEffect(() => {\n    \n    getUser()\n}, [reload])\n\n\n\n \n    \n    return (\n        <Base name=\"My profile\" >\n        \n            <div className=\"row mt-5\">\n                <div className=\"col-6 offset-3\">\n                \n                    <Card name={name} email={email} photoUrl={photoUrl}></Card>\n                    <div className=\"row mt-3\">\n                        \n                        <div className=\"col-4 text-center\"><Link to=\"/friendlist\" className=\"btn  rounded\">Friend List</Link></div>\n                        <div className=\"col-4 text-center\"><Link to=\"/grouplist\" className=\"btn rounded\">Chat Groups</Link></div>\n                        <div className=\"col-4 text-center\"><Link to=\"/blocklist\" className=\"btn rounded\">Blocks</Link></div>\n                        \n                    </div>\n                </div>\n            </div>\n        </Base>\n    )\n}\n\nexport default withRouter(Home)\n","import React,{useState} from 'react'\nimport Base from \"../components/Base\"\nimport {Link} from \"react-router-dom\"\nimport {auth,db} from \"../firebase/Fire.js\"\n\nfunction Login() {\n\nconst [email, setemail] = useState(\"\")\nconst [password, setpassword] = useState(\"\")\nconst [err,seterr] = useState(\"\")\n\nconst formSubmit = (e)=>{\n    e.preventDefault();\n    seterr(\"\")\n    auth().signInWithEmailAndPassword(email,password)\n    .then((user) => {\n        //\n    })\n    .catch(err => {\n        seterr(err.message)\n        console.log(err)\n    })\n\n}\nconst ErrorMessage = ()=>{\n    return(\n        err ? <div className=\"alert alert-danger\">\n            <p>{err}</p>\n        </div> : \"\"\n    )\n}\n\n\n    const LoginForm =()=>{\n        \n        return(\n            <div className=\"row mt-3\">\n             \n                <div className=\"col-md-6 offset-3\">\n                {ErrorMessage()}\n                \n                \n                <form className=\"form text-white\">\n                    \n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Email</label>\n                        <input type=\"text\" className=\"form-control\" required  onChange={(e)=>{setemail(e.target.value)}} value={email} />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Password</label>\n                        <input type=\"password\" className=\"form-control\" required  onChange={(e)=>{setpassword(e.target.value)}} value={password} />\n                    </div>\n                    \n\n                    <div className=\"form-group mt-4\">\n                        <button type=\"submit\" onClick={formSubmit}  className=\"btn  rounded text-white btn-block\" >Login</button>\n                    </div>\n                </form>\n                <div className=\"text-center text-white\">\n                    <p style={{color:\"black\"}}>New User? Then <Link to=\"/signup\" className=\"text-info\">Signup</Link> here</p>\n                </div>\n\n                </div>\n            </div>\n        )\n    }\n\n    \n    return (\n        <Base name=\"Login Page\">\n            {LoginForm()}\n        </Base>\n    )\n}\n\nexport default Login\n","const config = {\n    quality: 0.5,\n    maxWidth: 800,\n    maxHeight: 600,\n    autoRotate: true,\n    debug: true\n  };\n\n  export default config;","import React,{useState} from 'react'\nimport {Redirect} from \"react-router-dom\"\nimport Base from \"../components/Base\"\nimport {auth,db,storage} from \"../firebase/Fire.js\"\nimport {Link} from \"react-router-dom\"\nimport  {readAndCompressImage} from \"browser-image-resizer\"\nimport Config from \"../apiCalls/Config\"\nfunction Signup() {\n\n    const [name, setname] = useState(\"\")\n    const [email, setemail] = useState(\"\")\n    const [password, setpassword] = useState(\"\")\n    const [file,setfile] = useState(\"\")\n    const [err , setErr] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n\n\n     const formSubmit = async(e)=>{\n        e.preventDefault();\n        \n        if(!file){\n            setErr(\"upload a profile picture\")\n            return\n        }\n\n        var  newImage = \"\"\n\n        await readAndCompressImage(file,Config).then(resizedImage =>{\n                newImage = resizedImage\n        })\n\n        setLoading(true);\n        setErr(false)\n\n\n        auth().createUserWithEmailAndPassword(email,password)\n        .then((user)=>{\n            \n            if(user)\n            {\n                var metadata = {\n                    contentType: file.type\n                  };\n                  var rand = (Math.floor(Math.random()*100)).toString()\n                var uploadTask = storage.child(`images/${rand}${file.name}`).put(newImage,metadata)\n\n    \n                    uploadTask.on(\"state_changed\", \n                    function(snapshot) {\n                    \n                    var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                    console.log('Upload is ' + progress + '% done');\n                    switch (snapshot.state) {\n                        case \"paused\": \n                        console.log('Upload is paused');\n                        break;\n                        case \"running\": \n                        console.log('Upload is running');\n                        break;\n                    }\n                    }, function(error) {\n\n                        setErr(error);\n                        setLoading(false)\n                        console.log(\"ippo:: \",error);\n                        \n\n               \n                    }, function() {\n                    // Upload completed successfully, now we can get the download URL\n                    uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                    console.log('File available at', downloadURL);\n                    \n                    \n                     db.collection(\"users\").doc(user.user.email).set({\n                        name,\n                        email,\n                        password,\n                        photoUrl:downloadURL,\n                        friends:[],\n                        notify:{\n                            test : 12\n                        },\n                        notifyGroup:{\n\n                        },\n                        online:true,\n                        groups:[]\n                    })\n                    .then(function(usereyyy){\n                        alert(\"account Successfully created\")\n                        return (<Redirect to='/chat'  />)\n                       \n                    }\n                    \n                    )\n                    .catch(err =>{\n                        setErr(err)\n                        console.log(err);\n                        \n                    })\n\n                    });\n                    });\n\n\n\n            }\n            else\n            {\n                console.log(\"user Not created\")\n                setErr(\"user Not created\")\n                setLoading(false)\n            }\n        })\n        .catch(err => {\n    console.log(\"ERRRR:  \",err)\n    setErr(err.message)\n    setLoading(false)})\n\n\n\n    }\n\n    const LoadingMessage = ()=>{\n        return(\n            loading ? <div className=\"alert alert-warning\">\n                <p>Creating Account...</p>\n            </div> : \"\"\n        )\n    }\n\n    const ErrorMessage = ()=>{\n        return(\n            err ? <div className=\"alert alert-danger\">\n                <p>{err}</p>\n            </div> : \"\"\n        )\n    }\n\n\n   \n\n\n    const SignupForm =()=>{\n\n        return(\n            <div className=\"row mt-3\">\n             \n                <div className=\"col-md-6 offset-3\">\n                {LoadingMessage()}\n                {ErrorMessage()}\n                \n                \n                <form className=\"form text-white\">\n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Name</label>\n                        <input type=\"text\" className=\"form-control\" value={name} onChange={(e)=>{setname(e.target.value)}} required />\n                    </div>\n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Email</label>\n                        <input type=\"text\" className=\"form-control\" required  onChange={(e)=>{setemail(e.target.value)}} value={email} />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Password</label>\n                        <input type=\"password\" className=\"form-control\" required  onChange={(e)=>{setpassword(e.target.value)}} value={password} />\n                    </div>\n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Profile Photo</label>\n                        <input type=\"file\" className=\"form-control\" onChange={(e)=> {setfile(e.target.files[0])}} required />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button type=\"submit\"  onClick={formSubmit} className=\"btn rounded text-white btn-block\" >Sign Up</button>\n                    </div>\n                </form>\n                <div className=\"text-center \">\n                    <p style={{color:\"black\"}}> Own an Account? Then <Link to=\"/login\" className=\"text-info\">Login</Link> here</p>\n                </div>\n\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <Base name=\"Signup Page\">\n          {SignupForm()}\n        </Base>\n    )\n}\n\nexport default Signup\n","import React from 'react'\nimport Base from \"../components/Base\"\nimport { signout } from '../apiCalls/AuthFire'\nimport {Link} from 'react-router-dom' \n\nfunction Signout() {\n    return (\n        <Base>\n            <div className=\"row \">\n                <div className=\"col-4 offset-4 mt-auto mb-auto\">\n                    <div className=\"row\">\n                        <div className=\"col-12 \" style={{backgroundColor:\"#431c5d\"}}>\n                            <p className=\"lead\">Are u Sure?</p>\n                        </div>\n                    </div>\n                    <div className=\"row bg-white p-5\">\n                        <div className=\"col-6 text-center\">\n                                <button onClick={signout} className=\"btn rounded mt-auto mb-auto\">Signout</button>\n                        </div>\n                        <div className=\"col-6 text-center\">\n                        <Link className=\"btn btn2 rounded mt-auto mb-auto\" to=\"/\">Cancel</Link>\n                            \n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </Base>\n    )\n}\n\nexport default Signout\n","import React from 'react';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport { db } from '../firebase/Fire';\n\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\nclass Audio extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      isBlocked: false,\n      show:false\n    };\n  }\n\n  start = () => {\n      this.setState({show:true})\n      this.props.setRecording(true)\n    if (this.state.isBlocked) {\n      console.log('Permission Denied');\n    } else {\n      Mp3Recorder\n        .start()\n        .then(() => {\n          this.setState({ isRecording: true });\n        }).catch((e) => console.error(e));\n    }\n  };\n\n  stop = () => {\n    this.setState({show:false})\n    this.props.setRecording(false)\n    Mp3Recorder\n      .stop()\n      .getMp3()\n      .then(([buffer, blob]) => {\n        \n        \n        this.setState({isRecording: false });\n        this.props.insertAudio(blob);\n        \n      }).catch((e) => console.log(e));\n  };\n\n  componentDidMount() {\n    navigator.getUserMedia({ audio: true },\n      () => {\n        console.log('Permission Granted');\n        this.setState({ isBlocked: false });\n      },\n      () => {\n        console.log('Permission Denied');\n        this.setState({ isBlocked: true })\n      },\n    );\n  }\n\n  render(){\n    return (\n      <div className=\"col-2\" >\n     \n          <button   style={{display: this.state.show? \"none\":\"block\"}} className=\"btn  round text-center mt-3\" onMouseDown={this.start}  ><i className=\"fa fa-microphone fa-2x\"></i></button>\n          <button style={{display: this.state.show? \"block\":\"none\"}} className=\"btn btn2 round text-center mt-3\" onClick={this.stop} ><i className=\"fa fa-microphone-slash fa-2x\"></i> </button>\n      \n      </div>\n    );\n  }\n}\n\nexport default Audio;","import React from 'react'\nimport Audio from \"./Audio\"\n\n\nfunction InputBox({insertMessage,insertImage,insertVideo,insertDocument,singleMessage,setsingleMessage,insertAudio,setRecording,emoji,setEmoji}) {\n    return (\n\n        <div id=\"inputs\" className=\"text-dark\">\n                    <div className=\"row\">\n                        <div className=\"col-5 border-right\">\n                        <div className=\"row\">\n                            <div className=\"ml-1 col-2 text-center\">\n                            <div className=\"image-upload mt-4\">\n                            \n                            <label htmlFor=\"image-input\">\n                                <i className=\"fa fa-camera fa-2x icon\" style={{color:\" #8458B3\"}}></i>\n                            </label>\n\n                            <input id=\"image-input\" type=\"file\" accept=\"image/*\" onChange={insertImage} />\n                            </div>\n                            </div>\n                            \n                            \n                            <div className=\"col-2 text-center\">\n                            <div className=\"image-upload mt-4\">\n                            <label htmlFor=\"video-input\">\n                                <i className=\"fa fa-file-video-o fa-2x  icon \" style={{color:\" #8458B3\"}}></i>\n                            </label>\n\n                            <input id=\"video-input\" type=\"file\" accept=\"video/*\" onChange={insertVideo} />\n                            </div>\n                            </div>\n\n                            <div className=\"col-2 text-center\">\n                            <div className=\"image-upload  mt-4 pointer\">\n                            <label htmlFor=\"document-input\"  >\n                                <i className=\"fa fa-book fa-2x  icon\" style={{color:\" #8458B3\"}}></i>\n                            </label>\n\n                            <input id=\"document-input\" type=\"file\" accept=\".xlsx,.xls,,.doc, .docx,.ppt, .pptx,.txt,.pdf\" onChange={insertDocument}/>\n                            </div>\n                            </div>\n                            <Audio insertAudio={insertAudio}  setRecording={setRecording}></Audio>\n                            <div className=\"col-2\" >\n                                \n                                    <button   style={{display: emoji? \"none\":\"block\"}} className=\"btn btn-dark round text-center mt-3\" onClick={()=>{setEmoji(true)}}  ><i className=\"fa fa-smile-o fa-2x\"></i></button>\n                                    <button style={{display: emoji? \"block\":\"none\"}} className=\"btn btn2 btn-danger round text-center mt-3\" onClick={()=>{setEmoji(false)}} ><i className=\"fa fa-smile-o fa-2x\"></i> </button>\n                                \n                                </div>\n\n                            \n                            \n                        </div>\n                        </div>\n                        <div className=\"col-7\">\n                           <form onSubmit={insertMessage} >\n                           <div className=\"row mt-4\">\n                               <div className=\"col-10\">\n                               <div className=\"form-group\">\n                                    <textarea name=\"\" id=\"\" cols=\"20\" rows=\"1\" className=\"form-control\" value={singleMessage} onChange = {(e)=>{setsingleMessage(e.target.value)}}></textarea>\n                                </div>\n                               </div>\n                               <div className=\"col-2\">\n                                        <button type=\"submit\" onClick={(e)=>{insertMessage(e);setEmoji(false)}}  className=\"btn send btn-lg text-center\" > <i className=\"fa fa-paper-plane\" ></i></button>\n                               </div>\n                           </div>\n                           </form> \n                        </div>\n                    </div>\n                </div>\n    )\n}\n\nexport default InputBox\n","import React, { useState } from 'react';\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\n \nconst Emoji = ({emoji,setsingleMessage,singleMessage}) => {\n  const [chosenEmoji, setChosenEmoji] = useState(null);\n \n  const onEmojiClick = async(event, emojiObject) => {\n    setChosenEmoji(emojiObject);\n    console.log(emojiObject);\n    await setsingleMessage((prevState)=>(prevState+emojiObject.emoji))\n    console.log(singleMessage);\n    \n    \n  };\n if(emoji)\n {\n    return (\n     <div className=\"row mt-3\">\n                    <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  \" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\"}}  >\n                            \n                            <Picker onEmojiClick={onEmojiClick} skinTone={SKIN_TONE_MEDIUM_DARK} />\n                                 \n                            </div>\n                            \n                        </div>\n                    </div>\n       \n      );\n }\n else{\n     return(\"\")\n }\n  \n};\n\nexport default Emoji","import React,{useState,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport InputBox from \"../components/InputBox\"\nimport {auth,db,fireup,storage} from \"../firebase/Fire\"\nimport {useParams,useHistory} from \"react-router-dom\"\nimport  {readAndCompressImage} from \"browser-image-resizer\"\nimport Config from \"../apiCalls/Config\"\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport Emoji from \"../components/Emoji\"\n\n\nfunction Chat() {\n\n    const Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\n   \n    \n    let history = useHistory()\n    const {friendemail,chatId} = useParams()\n    const [loading,setLoading] = useState(false)\n    const [recording,setRecording] = useState(false)\n    const [emoji,setEmoji] = useState(false)\n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\",\n        friends:\"\"\n        \n    })\n    const [Friend , setFriend] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\",\n        online:\"\",\n        \n    })\n    const [singleMessage, setsingleMessage] = useState(\"\")\n\n    const [messages,setMessages] = useState([]);\n\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n       \n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,friends:item.data().friends\n                })\n                db.collection(\"users\").doc(friendemail).get()\n                .then(item => {\n                    if(item.exists)\n                    {\n                        setFriend({\n                            ...Friend,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,online:item.data().online\n                        }) \n                    }\n                })\n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n    function updateScroll(){\n        \n            var element = document.getElementById('qw');\n            element.scrollTop = element.scrollHeight;\n\n        }\n    \n    useEffect(()=>{\n        preload()\n        \n    },[friendemail])\n\n    useEffect(()=>{\n        db.collection(\"users\").doc(friendemail)\n        .onSnapshot(function(item) {\n           \n            \n            setFriend({\n                ...Friend,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,online:item.data().online\n            }) \n        });\n    },[])\n\n    useEffect(()=>{\n        updateScroll()\n    },[messages])\n\n    useEffect(()=>{\n        db.collection(\"chats\").doc(chatId).get()\n        .then(doc => {\n            setMessages(doc.data().Messages)\n           if(Current.email)\n           {\n            var data1 =chatId.replace(\".\",\"q\");\n            var data2 = data1.replace(\".\",\"q\")\n            db.collection(\"users\").doc(Current.email).update({\n                [\"notify.\"+data2]:0\n            }).then()\n           }\n        }).catch(err => console.log(err))\n    },[Current])\n\n    useEffect(()=>{\n        db.collection(\"chats\").doc(chatId)\n        .onSnapshot(function(doc) {\n            setMessages(doc.data().Messages)\n            if(Current.email)\n            {\n                var data1 =chatId.replace(\".\",\"q\");\n            var data2 = data1.replace(\".\",\"q\")\n            db.collection(\"users\").doc(Current.email).update({\n                [\"notify.\"+data2]:0\n            }).then(()=> console.log(\"success\"))\n            }\n        });\n    },[])\n\n   const blockUser= async()=>{\n\n    let newList = await Current.friends.map((item)=>{\n        if(item.email === friendemail)\n        {\n            item.blocked = true\n        }\n        return(item)\n    })\n\n    db.collection(\"users\").doc(Current.email).update({\n        friends:newList\n    })\n    .then(()=>{\n        alert(\"blocked\");\n        setTimeout(()=>{\n            history.push(\"/\")\n        },1000)\n        \n    })\n    \n    \n\n   }\n\n   const insertMessage = (e)=>{\n        e.preventDefault();\n\n        if(singleMessage)\n        {\n            db.collection(\"chats\").doc(chatId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"text\",\n                    sender:Current.email,\n                    receiver:Friend.email,\n                    content:singleMessage,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n\n                  var firstVal = chatId.replace(\".\",\"q\")\n                  var lastVal = firstVal.replace(\".\",\"q\")\n                db.collection(\"users\").doc(Friend.email).update({\n                    [\"notify.\"+lastVal] : fireup.FieldValue.increment(1)\n                }).then(item =>{\n                    setsingleMessage(\"\")\n                }).catch(err => console.log(err)\n                )\n            })\n            .catch(err => {\n                console.log(err);\n                \n            })\n        }\n      \n    }\n\n    const insertImage = (e)=>{\n        \n        const file = e.target.files[0];\n        setLoading(true);\n        readAndCompressImage(file,Config).then(resizedImage => {\n\n            var metadata = {\n                contentType: file.type\n              };\n              var rand = (Math.floor(Math.random()*100)).toString()\n            var uploadTask = storage.child(`imageMessages/${rand}${file.name}`).put(resizedImage,metadata)\n\n\n                uploadTask.on(\"state_changed\", \n                function(snapshot) {\n                \n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log('Upload is ' + progress + '% done');\n                switch (snapshot.state) {\n                    case \"paused\": \n                    console.log('Upload is paused');\n                    break;\n                    case \"running\": \n                    console.log('Upload is running');\n                    break;\n                }\n                }, function(error) {\n\n                    \n                    console.log(\"ippo:: \",error);\n                    setLoading(false)\n\n                    \n\n           \n                }, function() {\n                // Upload completed successfully, now we can get the download URL\n                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                console.log('File available at', downloadURL);\n                db.collection(\"chats\").doc(chatId).update({\n                    Messages:fireup.FieldValue.arrayUnion({\n                        type:\"image\",\n                        sender:Current.email,\n                        receiver:Friend.email,\n                        content:downloadURL,\n                        time: new Date()\n                       \n                    })\n                })\n                .then(item => {\n    \n                      var firstVal = chatId.replace(\".\",\"q\")\n                      var lastVal = firstVal.replace(\".\",\"q\")\n                    db.collection(\"users\").doc(Friend.email).update({\n                        [\"notify.\"+lastVal] : fireup.FieldValue.increment(1)\n                    }).then(item =>{\n                        console.log(\"successsss\")\n                        setLoading(false)\n                    }).catch(err => {console.log(err)\n                        setLoading(false)\n                    }\n                    )\n                    \n                })\n                .catch(err => {\n                    console.log(err);\n                    setLoading(false)\n                    \n                })\n\n\n             \n               \n               \n\n                });\n                });\n            \n\n        })\n    }\n\n    const insertVideo = (e)=>{\n        const file = e.target.files[0];\n        setLoading(true);\n        var metadata = {\n            contentType: file.type\n          };\n          var rand = (Math.floor(Math.random()*100)).toString()\n        var uploadTask = storage.child(`videoMessages/${rand}${file.name}`).put(file,metadata)\n\n\n            uploadTask.on(\"state_changed\", \n            function(snapshot) {\n            \n            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log('Upload is ' + progress + '% done');\n            switch (snapshot.state) {\n                case \"paused\": \n                console.log('Upload is paused');\n                break;\n                case \"running\": \n                console.log('Upload is running');\n                break;\n            }\n            }, function(error) {\n\n                \n                console.log(\"ippo:: \",error);\n                setLoading(false)\n\n                \n\n       \n            }, function() {\n            // Upload completed successfully, now we can get the download URL\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n            console.log('File available at', downloadURL);\n            db.collection(\"chats\").doc(chatId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"video\",\n                    sender:Current.email,\n                    receiver:Friend.email,\n                    content:downloadURL,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n\n                  var firstVal = chatId.replace(\".\",\"q\")\n                  var lastVal = firstVal.replace(\".\",\"q\")\n                db.collection(\"users\").doc(Friend.email).update({\n                    [\"notify.\"+lastVal] : fireup.FieldValue.increment(1)\n                }).then(item =>{\n                    \n                    setLoading(false)\n                }).catch(err => {console.log(err)\n                    setLoading(false)\n                }\n                )\n                \n            })\n            .catch(err => {\n                \n                setLoading(false)\n                \n            })\n\n            });\n            });\n    }\n\n    const insertAudio = (blob)=>{\n\n        setLoading(true);\n        var metadata = {\n            contentType: blob.type\n          };\n          var rand = (Math.floor(Math.random()*100)).toString()\n        var uploadTask = storage.child(`AudioMessages/Audio ${rand}`).put(blob,metadata)\n\n\n            uploadTask.on(\"state_changed\", \n            function(snapshot) {\n            \n            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log('Upload is ' + progress + '% done');\n            switch (snapshot.state) {\n                case \"paused\": \n                console.log('Upload is paused');\n                break;\n                case \"running\": \n                console.log('Upload is running');\n                break;\n            }\n            }, function(error) {\n\n                \n                console.log(\"ippo:: \",error);\n                setLoading(false)\n\n                \n\n       \n            }, function() {\n            // Upload completed successfully, now we can get the download URL\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n            console.log('File available at', downloadURL);\n            db.collection(\"chats\").doc(chatId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"audio\",\n                    sender:Current.email,\n                    receiver:Friend.email,\n                    content:downloadURL,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n\n                  var firstVal = chatId.replace(\".\",\"q\")\n                  var lastVal = firstVal.replace(\".\",\"q\")\n                db.collection(\"users\").doc(Friend.email).update({\n                    [\"notify.\"+lastVal] : fireup.FieldValue.increment(1)\n                }).then(item =>{\n                    console.log(\"successsss\")\n                    setLoading(false)\n                }).catch(err => {console.log(err)\n                    setLoading(false)\n                }\n                )\n                \n            })\n            .catch(err => {\n                console.log(err);\n                setLoading(false)\n                \n            })\n\n            });\n            });\n\n\n    } \n\n    const insertDocument = (e)=>{\n        const file = e.target.files[0];\n        setLoading(true);\n        var metadata = {\n            contentType: file.type\n          };\n          var rand = (Math.floor(Math.random()*100)).toString()\n        var uploadTask = storage.child(`documentMessages/${rand}${file.name}`).put(file,metadata)\n\n\n            uploadTask.on(\"state_changed\", \n            function(snapshot) {\n            \n            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log('Upload is ' + progress + '% done');\n            switch (snapshot.state) {\n                case \"paused\": \n                console.log('Upload is paused');\n                break;\n                case \"running\": \n                console.log('Upload is running');\n                break;\n            }\n            }, function(error) {\n\n                \n                console.log(\"ippo:: \",error);\n                setLoading(false)\n\n                \n\n       \n            }, function() {\n            // Upload completed successfully, now we can get the download URL\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                \n            console.log('File available at', downloadURL);\n            db.collection(\"chats\").doc(chatId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"document\",\n                    sender:Current.email,\n                    receiver:Friend.email,\n                    content:downloadURL,\n                    documentName:file.name,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n\n                  var firstVal = chatId.replace(\".\",\"q\")\n                  var lastVal = firstVal.replace(\".\",\"q\")\n                db.collection(\"users\").doc(Friend.email).update({\n                    [\"notify.\"+lastVal] : fireup.FieldValue.increment(1)\n                }).then(item =>{\n                    console.log(\"successsss\")\n                    setLoading(false)\n                }).catch(err => {console.log(err)\n                    setLoading(false)\n                }\n                )\n                \n            })\n            .catch(err => {\n                console.log(err);\n                setLoading(false)\n                \n            })\n\n\n         \n           \n           \n\n            });\n            });\n    } \n\n    const loadingMessage = ()=>{\n       \n        \n        if(loading === true)\n        {\n            return(\n                <div className=\"row mt-3\">\n                    <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  rounded bg-warning\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\"}}  >\n                            \n                                \n                                    <p>sending....</p>\n                            </div>\n                            \n                        </div>\n                    </div>\n            ) \n        }\n    }\n\n    const recordingMessage =()=>{\n\n        if(recording === true)\n        {\n            return(\n                <div className=\"row mt-3\">\n                    <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  rounded bg-success\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\"}}  >\n                            \n                                \n                                    <p>Reocording....</p>\n                            </div>\n                            \n                        </div>\n                    </div>\n            ) \n        }\n\n    }\n\n\n    const deleteMessage =(item) => {\n        console.log(item);\n        db.collection(\"chats\").doc(chatId).update({\n            Messages:fireup.FieldValue.arrayRemove(item)\n        }).then(()=>{\n            \n            \n            console.log(\"deleted successfully\")\n        })\n    }\n        \n    const onlineMessage =()=>{\n        if(Friend.online)\n        {\n            return(\n                <p className=\"badge badge-success p-1\">Online</p>\n            )\n        }\n    }\n    \n\n\n    const displayMessage = (type,content,name)=>{\n        if(type === \"text\")\n        {\n            return(\n                  <div>\n                 <p className=\"lead\">{content}</p>\n                </div> \n\n            )\n        }\n        else if(type === \"image\")\n        {\n            return(\n                \n                <a  target=\"_blank\" href={content}>\n                <img  src={content} style={{maxHeight:\"300px\",maxWidth:\"300px\"}} alt=\"\"/>\n                </a>\n                \n                \n            )\n        }\n        else if(type === \"video\")\n        {\n            return(\n                <>\n                <a  target=\"_blank\" href={content}>\n                \n                <video width=\"320\" height=\"240\"  src={content} controls>\n                \n                asdasd\n                </video>\n                    \n           \n                </a>\n                <i className=\"fa fa-video-camera\" style={{display:\"block\"}}></i>\n                </>\n                \n            )\n        }\n        else if(type === \"audio\")\n        {\n           return(\n                <audio src={content} controls=\"controls\" />\n            )\n        }\n        else\n        {\n            return(\n                <div className=\"col-12 text-center\">\n                <a  target=\"_blank\" href={content}>\n                \n\n                <i className=\"fa fa-file fa-4x text-dark document-icon\"></i> \n           \n                </a>\n                <p>{name}</p>\n                </div>\n            )\n        }\n\n    }\n\n\n    const putTime = (time)=>{\n        return(\n            time.toLocaleString('en-US', { hour: 'numeric',minute:'numeric', hour12: true })\n          );\n    } \n\n    const putDate = ()=>{\n        const date = new Date()\n        return(\n            date.toLocaleString('en-US', { day:'numeric',month:'numeric',year:'numeric' })\n          );\n    } \n\n\n    const mainElement = ()=>{\n\n        var day = \"\"\n        const checkDate =(date)=>{\n            \n            if(day !== date.getDate())\n            {\n\n                if(new Date().getDate() === date.getDate())\n                {\n                    day = date.getDate()\n                    return(\n                    \n                        <div className=\"col-12 text-center\">\n                            <p className=\"p-1\" style={{display:\"inline-block\",backgroundColor:\"#99AAAB\",borderRadius:\"5px\"}}>Today</p>\n                        </div>\n                    \n                )\n\n                }\n                day = date.getDate()\n                return(\n                    \n                        <div className=\"col-12 text-center\">\n                            <p className=\"p-1\" style={{display:\"inline-block\",backgroundColor:\"#99AAAB\",borderRadius:\"5px\"}}>{date.toLocaleString('en-US', { day:'numeric',month:'long',year:'numeric' })}</p>\n                        </div>\n                    \n                )\n            }\n            \n\n        }\n       \n\n            return(\n                <div className=\"col-8 \">\n                \n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <div className=\"row\">\n                            <div className=\"col-4\">\n                                <h4 className=\"lead\" style={{color:\"black\"}}>Messages:</h4>\n                            </div>\n                            <div className=\"col-8\">\n                            <h4 className=\"text-right lead\" style={{color:\"black\"}}>Date:{putDate()}</h4>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-12\">\n    \n                    <div id=\"qw\" className=\"fix mr-auto ml-auto text-dark\" >\n                      {messages.map((item,index) => (\n    \n                        item.sender === Current.email ? \n                        (<div key={index} className=\"row mt-3\">\n                        {checkDate(item.time.toDate())}\n                        <div className=\"col-7 offset-5 text-right \" >\n                                <div className=\" mr-3 p-2  rounded\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\",backgroundColor:\"#EEAEEE\"}}  onMouseOver={()=>{\n                                document.getElementById(index).style.display=\"block\"\n                        }} onMouseOut={()=>{document.getElementById(index).style.display=\"none\"}}  >\n                                  \n                                    {displayMessage(item.type,item.content,item.documentName)}\n                                    <div  > \n                                    <p className=\"text-left ml-1\"  style={{fontSize:\"8px\",color:\"black\"}}>\n                                    {putTime(item.time.toDate())}\n                                    </p>\n                                    <div className=\"row\" style={{display:\"none\"}} id={index}>\n                                        <div className=\"col-12 text-right\">\n                                            <i onClick={()=>{deleteMessage(item)}} className=\"fa fa-trash small-icons\"></i>\n                                        </div>\n                                    </div>\n                                    </div>\n                                    \n                                </div>\n                                \n                            </div>\n                        </div>) \n                        :  (<div key={index} className=\"row mt-3\">\n                        {checkDate(item.time.toDate())}\n                        <div className=\"col-7 \">\n                                <div className=\"lead ml-3 rounded\" style={{wordWrap:\"break-word\",maxWidth:\"100%\",display:\"inline-block\",backgroundColor:\"white\"}} >\n    \n                                    <div className=\"p-3 \">\n                                    {displayMessage(item.type,item.content,item.documentName)}\n    \n                                    </div>\n                                    <div className=\"mr-1\" > \n                                    <p className=\"text-right\" style={{fontSize:\"8px\",color:\"black\"}}>\n                                    {putTime(item.time.toDate())}\n                                    \n                                    </p></div>\n                                </div>\n                            </div>\n                        </div>)\n    \n    ))}\n    {recordingMessage()}\n    {loadingMessage()}\n    <Emoji emoji={emoji} singleMessage={singleMessage} setsingleMessage={setsingleMessage} ></Emoji>\n\n    <div className=\"clear\"></div>\n    \n                    </div>\n                    <InputBox insertMessage={insertMessage} insertImage={insertImage} insertVideo={insertVideo} \n                    insertDocument = {insertDocument} emoji={emoji} setEmoji={setEmoji}\n                    singleMessage={singleMessage} setsingleMessage={setsingleMessage} insertAudio={insertAudio} setRecording={setRecording}\n                    ></InputBox>\n    \n                    </div>\n                </div>\n               \n                \n            </div>\n    \n            )\n        \n        \n        \n    }\n    \n     \n    \n\n\n    const chatBox = ()=> {\n        return(\n            <div className=\"row\">\n        <div className=\"col-3\">\n            <div className=\"row\">\n            <div className=\"col-12 mt-5 text-center\"  >\n            <img className=\" profileDp\"  src={Friend.photoUrl} alt=\"\"/>\n                \n            </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-12 text-center mt-5\">\n                        <h4 style={{color:\"black\"}}>{Friend.name}</h4>\n                </div>\n                <div className=\"col-12 text-center mt-3\">\n                        <h6 style={{color:\"black\"}}>{Friend.email}</h6>\n                </div>\n                <div className=\"col-12 text-center mt-3\">\n                        {onlineMessage()}\n                </div>\n                <div className=\"col-12 text-center mt-3\">\n                        <button className=\"btn  rounded\" onClick={blockUser}>Block</button>\n                </div>\n              \n            </div>\n        </div>\n        {mainElement()}\n        \n\n        </div>\n           \n        )\n    }\n\n\n\n\n\n    return (\n        <Base >\n                {chatBox()}\n               \n        \n        </Base>\n    )\n}\n\nexport default Chat\n","import React,{useState,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport {db,auth,fireup} from \"../firebase/Fire\"\nimport Card from \"../components/Card\"\nimport {Link} from \"react-router-dom\"\n\nfunction AddFriend() {\nconst [irukka,setIrukka] = useState(\"\")\nconst [Current , setCurrent] = useState({\n    name : \"\",\n    email : \"\",\n    photoUrl : \"\",\n    friends :[]\n})\nconst [user,setUser] =  useState({\n    name : \"\",\n    email : \"\",\n    photoUrl : \"\"\n})\nconst [email, setemail] = useState(\"\")\nconst [loading, setloading] = useState(\"\")\nconst [success, setsuccess] = useState(\"\")\nconst [error,setError] = useState(\"\")\n\nconst preload = async()=>{\n\n    const current = await auth().currentUser\n\n    db.collection(\"users\").doc(current.email).get()\n    .then(item => {\n        if(item.exists)\n        {\n\n            setCurrent({\n                ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,friends:item.data().friends\n            })\n        }\n        else{\n            console.log(\"current user Not Available\");\n            \n        }\n    })\n    .catch(err => {\n        console.log(err);\n        \n    })\n\n}\n\nuseEffect(()=>{\n    preload()\n},[])\n\nuseEffect(()=>{\n\n    db.collection(\"users\").doc(auth().currentUser.email)\n    .onSnapshot(function(doc) {\n        \n        \n        setCurrent({...Current,name:doc.data().name,email:doc.data().email,photoUrl:doc.data().photoUrl,friends:doc.data().friends})\n    });\n},[])\n\nconst FindUser = (e)=>{\n\n    e.preventDefault()\n    setError(\"\");\n    setsuccess(\"\");\n\nif(email)\n{\n    db.collection(\"users\").doc(email).get()\n    .then((item)=>{\n        if(item.exists)\n        {\n            const {name,email,photoUrl} = item.data()\n            setUser({\n                ...user,\n                name:name,\n                email:email,\n                photoUrl:photoUrl\n            })\n            setIrukka(1)\n\n        }\n        else\n        {\n            setIrukka(2)\n        }\n    })\n    .catch(err => console.log(\"edededddddd:\",err)\n    )\n}\nelse\n{\n    setError(\"enter the valid email\")\n    console.log(\"enter thhe valid email\");\n    \n\n}\n    \n    \n}\n\n\n    const SearchForm =()=>{\n        \n        return(\n\n            <div className=\"row mt-3\">\n                <div className=\"col-md-6 offset-3\" style={{border:\"1px solid black\"}}>\n                \n                \n                <form className=\"form text-white \">\n                    \n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Email</label>\n                        <input type=\"text\" className=\"form-control\" required  onChange={(e)=>{setemail(e.target.value)}} value={email} />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button onClick={FindUser} type=\"submit\" className=\"btn btn-success rounded btn-block\">Search User</button>\n                    </div>\n                    \n\n                    \n                </form>\n               \n\n                </div>\n\n                \n            </div>\n        )\n    }\n\n    const Duplicate =()=>{\n        var count = 0\n        if(Current.friends.length > 0)\n        {\n            Current.friends.forEach((friend => {\n                \n                if (friend.email == user.email)\n                { \n                \n                    count = count+1\n                }\n            }))\n        }\n           \n            return count\n            \n    }\n\n    const makeFriend=()=>{\n            setloading(true)\n            setsuccess(false)\n            setError(false)\n            \n            \n            if(Duplicate() === 0)\n            {\n                let chat = Current.email + user.email;\n               \n                \n                db.collection(\"chats\").doc(chat).set({\n                    firstName:Current.name,\n                    firstEmail:Current.email,\n                    secondname:user.name,\n                    secondEmail:user.email,\n                    Messages:[]\n                    }\n                )\n                .then(docs => {\n                    console.log(\"common doc Created\");\n                    \n                    db.collection(\"users\").doc(Current.email).update({\n                        friends:fireup.FieldValue.arrayUnion({\n                            name:user.name,\n                            email:user.email,\n                            photoUrl:user.photoUrl,\n                            chat:chat,\n                            blocked:false\n                            \n                        }),\n                        \n\n                    })\n                    .then(data => {\n                        console.log(\"added in ur frndList \")\n                        db.collection(\"users\").doc(user.email).update({\n                            friends:fireup.FieldValue.arrayUnion({\n                                name:Current.name,\n                                email:Current.email,\n                                photoUrl:Current.photoUrl,\n                                chat:chat\n                                \n                            })\n                        })\n                        .then(junk => {\n                            console.log(\"everything updated successfully\")\n                            setsuccess(true)\n                            setloading(false)\n                            \n                        })\n                        .catch(err => console.log(\"cannot update sencond Document \",err))\n                        \n                    }\n                        \n                    )\n                    .catch(err => console.log(\"error in adding in ur frndlist \",err))\n                })\n                .catch(\n                    err => console.log(\"cannot create common document  ::\",err)\n                    \n                )\n                \n               \n            }\n            else{\n                setError(\"This user is already in your Friendlist\")\n                  \n                setloading(false)\n            }\n            \n            \n            \n        \n    }\n\n\n\n    const result = ()=>{\n\n       return( !irukka ? (\n            <p className=\"lead  \" style={{color:\"black\"}}><span className=\"badge badge-success mr-2\">Hint:</span> Input the email of your Friend</p>\n        ) : irukka === 1 ? (\n           \n            <div>\n            <Card name={user.name} email={user.email} photoUrl={user.photoUrl}></Card>\n            <button onClick={makeFriend} className=\"btn  rounded btn-block btn-lg mt-3\">Add To FriendList</button>\n\n            </div>\n            \n            \n        ):( \n            <h1 className=\"text-danger\">User Not Found</h1>\n        )\n        )\n       \n\n    }\n\n    const successMessage = ()=>(\n        success ? (\n            <div className=\"alert alert-success\">\n                Added to your FriendList\n            </div>\n        ) : \"\"\n    )\n\n    const errorMessage = ()=>(\n        error ? (\n            <div className=\"alert alert-danger\">\n                {error}\n            </div>\n        ) : \"\"\n    )\n\n    const loadingMessage = ()=>(\n        loading ? (\n            <div className=\"alert alert-warning\">\n                Loading...\n            </div>\n        ) : \"\"\n    )\n\n\n\n    \n\n\n\n\n    return (\n        <Base>\n\n           {SearchForm()}\n           <div className=\"row mt-5\">\n             \n            <div className=\"col-md-6 offset-3 text-center\" >\n            {successMessage()}\n            {loadingMessage()}\n            {errorMessage()}\n            {result()}\n            <Link className=\"btn  btn-lg text-white mt-2\" to=\"friendlist\">Go Back</Link>\n            \n            </div>\n            </div>\n           \n        </Base>\n    )\n}\n\nexport default AddFriend\n","import React,{useEffect,useState} from 'react'\nimport Base from \"../components/Base\"\nimport {Link,useHistory} from \"react-router-dom\"\nimport {auth,db,fireup,storage} from \"../firebase/Fire\"\nimport  {readAndCompressImage} from \"browser-image-resizer\"\nimport Config from \"../apiCalls/Config\"\n\nfunction AddGroup() {\n\n    let history = useHistory()\n\n    const [name, setname] = useState(\"\");\n    const [file, setfile] = useState(\"\"); \n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\"\n        \n    })\n    const [Id,setId] = useState(\"\")\n    const [success, setsuccess] = useState(false)\n    const [loading, setloading] = useState(false)\n    const [error, seterror] = useState(false)\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,friends:item.data().friends\n                })\n               \n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n\n    useEffect(()=>{\n            preload()\n    },[])\n\n\n    const formSubmit = async(e)=>{\n\n        if(!file)\n        {\n            seterror(\"please select a group icon picture\")\n            return\n        }\n            e.preventDefault();\n            setloading(true)\n            setsuccess(false)\n            seterror(false)\n\n      var  newImage = \"\"\n\n        await readAndCompressImage(file,Config).then(resizedImage =>{\n                newImage = resizedImage\n        })\n\n             var metadata = {\n                    contentType: file.type\n                  };\n                  var rand = (Math.floor(Math.random()*100)).toString()\n                var uploadTask = storage.child(`images/${rand}${file.name}`).put(newImage,metadata)\n\n    \n                    uploadTask.on(\"state_changed\", \n                    function(snapshot) {\n                    \n                    var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                    console.log('Upload is ' + progress + '% done');\n                    switch (snapshot.state) {\n                        case \"paused\": \n                        console.log('Upload is paused');\n                        break;\n                        case \"running\": \n                        console.log('Upload is running');\n                        break;\n                    }\n                    }, function(error) {\n\n                        \n                        console.log(\"ippo:: \",error);\n                        \n\n               \n                    }, function() {\n                    // Upload completed successfully, now we can get the download URL\n                    uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                    console.log('File available at', downloadURL);\n  \n                    db.collection(\"groups\").add({\n                        name : name,\n                        icon : downloadURL,\n                        Messages : [],\n                        members :[{\n                            name:Current.name,\n                            email:Current.email,\n                            photoUrl:Current.photoUrl\n                        }],\n                        admin : auth().currentUser.email\n                    }).then(item => {\n                        console.log(item.data);\n                        setId(item.Id)\n                        \n                        db.collection(\"users\").doc(auth().currentUser.email).update({\n                            \n                            groups:fireup.FieldValue.arrayUnion({\n                                groupId:item.id,\n                                icon:downloadURL,\n                                name:name,\n                                admin:true,\n                            }),\n                            [\"notifyGroup.\"+item.id]:0\n                        })\n                        .then(data => {\n                            db.collection(\"groupNotify\").doc(item.id).set({\n                                groupId : item.id,\n                                name:name,\n                                members:[Current.email],\n                                total:0\n                            })\n                            .then(()=>{\n                                    console.log(\"successfully created group\");\n                            setloading(false)\n                            setsuccess(true)\n                            setname(\"\")\n                            setfile(\"\")\n                            })\n                            \n                            \n                        })\n                        .catch(err => {console.log(err)\n                            setloading(false)\n\n                        seterror(err)}\n                        )\n                    }).catch(err => {console.log(err)\n                        setloading(false)\n\n                        seterror(err.message())})\n                   \n                   \n\n                    });\n                    });\n          \n    }\n\n    const GroupForm =()=>{\n\n        return(\n            <div className=\"row mt-3\">\n             \n                <div className=\"col-md-6 offset-3\">\n                {successMessage()}\n            {loadingMessage()}\n            {errorMessage()}\n                \n                \n                \n                <form className=\"form text-white mt-5\">\n                    <div className=\"form-group\">\n                        <label style={{color:\"black\"}}>Group Name</label>\n                        <input type=\"text\" className=\"form-control\" value={name} onChange={(e)=>{setname(e.target.value)}} required />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                        <label  style={{color:\"black\"}} >group icon</label>\n                        <input type=\"file\" className=\"form-control\" accept=\"image/*\" onChange={(e)=>{setfile(e.target.files[0])}}  required />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button type=\"submit\"  onClick={formSubmit} className=\"btn rounded text-white btn-block\" >Create Group</button>\n                    </div>\n                </form>\n                <Link className=\"btn rounded btn-lg text-white\" to=\"grouplist\">Go Back</Link>\n\n                </div>\n            </div>\n        )\n    }\n    const successMessage = ()=>(\n        success ? (\n            <div className=\"alert alert-success\">\n                Group Created successfully\n                {setTimeout(()=>{\n                    history.push(\"/grouplist\")\n                },1000)}\n            </div>\n        ) : \"\"\n    )\n\n    const errorMessage = ()=>(\n        error ? (\n            <div className=\"alert alert-danger\">\n                {error}\n            </div>\n        ) : \"\"\n    )\n\n    const loadingMessage = ()=>(\n        loading ? (\n            <div className=\"alert alert-warning\">\n                Loading...\n            </div>\n        ) : \"\"\n    )\n\n\n    return (\n       <Base>\n            {GroupForm()}\n           \n \n       </Base>\n    )\n}\n\nexport default AddGroup\n","import React,{useState,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport {auth,db} from \"../firebase/Fire\"\nimport {Link,useHistory} from \"react-router-dom\"\n\nfunction FriendList() {\n\n   const history = useHistory()\n    \n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\",\n        friends :[],\n        notify:{}\n    })\n\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,friends:item.data().friends,notify:item.data().notify\n                })\n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n    \n    useEffect(()=>{\n        preload()\n    },[])\n\n    useEffect(()=>{\n\n        db.collection(\"users\").doc(auth().currentUser.email)\n        .onSnapshot(function(doc) {\n           \n            \n            setCurrent({...Current,name:doc.data().name,email:doc.data().email,photoUrl:doc.data().photoUrl,friends:doc.data().friends,notify:doc.data().notify})\n        });\n    },[])\n\n    const notifications = (data) => {\n            var data1 = data.replace(\".\",\"q\");\n            var data2 = data1.replace(\".\",\"q\")\n           if(Current.notify[data2] > 0)\n           {\n               return(\n                   <button className=\"btn btn2 send  \">{Current.notify[data2]}</button>\n               )\n           }\n           else{\n               return(\"\")\n           }\n    } \n\n    const list = ()=>{\n        \n        \n        if(Current.friends.length > 0)\n        {\n                return(<div className=\"row\">\n                <div className=\"col-3 text-center\">\n                    <div className=\"row\">\n                        <div className=\"col-12 ml-3\">\n                <div className=\"col-4 text-center\"><Link  to=\"/addfriend\" className=\"btn  rounded\">Add Friend</Link></div>\n\n\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-6  \" >\n                    <ul className=\"list-group rounded  \" >\n                        { Current.friends.map(item => (\n                            !item.blocked? (\n                                <li key={item.email} className=\"list-group-item friend\" style={{color:\"black\"}} >\n                                <div className=\"row\">\n                                    <div className=\"col-2\" style={{  \n        backgroundImage: \"url(\" + item.photoUrl+ \")\",\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n        }}>\n                                         \n                                    </div>\n                                    <div className=\"col-7 \"  onClick={() => history.push(`/chat/${item.email}/${item.chat}`)}>\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead\">{item.name}</p>\n                                             </div>\n                                         </div>\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead \">{item.email}</p>\n                                             </div>\n                                         </div>\n                                    </div>\n                                    <div className=\"col-2\">\n                                    {notifications(item.chat)}\n\n                                    </div>\n                                </div>\n                            </li>\n                            ): (\"\")\n                        ))}\n                    </ul>\n                    <div className=\"text-center mt-3\">\n                    <Link className=\"btn rounded  btn-lg text-white\" to=\"/\">Go Back</Link>\n        \n                    </div>\n                </div>\n        \n            </div>)\n        }\n        else{\n\n            return(\n\n                <div className=\"row\">\n                <div className=\"col-3 text-center\">\n                    <div className=\"row mt-5\">\n                        <div className=\"col-12 ml-3\">\n                <div className=\"col-4 text-center\"><Link  to=\"/addfriend\" className=\"btn rounded\">Add Friend</Link></div>\n\n\n                        </div>\n                    </div>\n                    </div>\n        <div className=\"col-6\">\n            <h1 className=\"text-center\">No Friends in the list </h1>\n            <div className=\"text-center mt-3\">\n            <Link className=\"btn  rounded  btn-lg text-white\" to=\"/\">Go Back</Link>\n\n            </div>\n        </div>\n\n    </div>\n            )\n\n        }\n}\n\n    return (\n        <Base name=\"My Friends\">\n         {list()}\n\n        </Base>\n    )\n}\n\nexport default FriendList\n","import React,{useState,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport {Link,useHistory} from \"react-router-dom\"\nimport {auth,db,fireup} from \"../firebase/Fire\"\n\n\n\n\nfunction GroupList() {\n\n    var history = useHistory()\n \n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\",\n        groups:\"\",\n        notifyGroup:\"\"\n    })\n    const [notifications, setNotifications] = useState(\"\")\n\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,groups:item.data().groups,notifyGroup:item.data().notifyGroup\n                })\n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n    \n    useEffect(()=>{\n        preload()\n    },[])\n\n    useEffect(()=>{\n        db.collection(\"groupNotify\").where(\"members\",\"array-contains\",Current.email).get()\n        .then(results => {\n            \n            results.forEach(doc => {\n               \n                setNotifications({...notifications,[doc.data().groupId]:doc.data().total})\n                \n            })\n        })\n        .catch(err => console.log(err)\n        )\n    },[Current.email])\n\n    const notification = (value,Id) => {\n       \n       let total = value;\n        if(notifications[Id])\n        {\n            \n            total = notifications[Id]\n        }\n\n        let diff = total - value;\n\n       if( diff > 0)\n       {\n           return(\n               <button className=\"btn btn2 send  \">{diff}</button>\n           )\n       }\n       else{\n          \n           \n           return(\"\")\n       }\n} \n\n\n\n\n\n\n\n    const list = ()=>{\n        \n        if(Current.groups.length > 0)\n        {\n                return(<div className=\"row\">\n                <div className=\"col-3 text-center\">\n                    <div className=\"row\">\n                        <div className=\"col-12 ml-3\">\n                <div className=\"col-4 text-center\"><Link  to=\"/addgroup\" className=\"btn  rounded\">Create Group</Link></div>\n    \n    \n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-6 \">\n                    <ul className=\"list-group fix\" >\n                        { Current.groups.map(item => (\n                            <li key={item.groupId} className=\"list-group-item friend\" style={{color:\"black\"}}>\n                                <div className=\"row\">\n                                    <div className=\"col-2\" style={{  \n        backgroundImage: \"url(\" + item.icon+ \")\",\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',height:\"100px\"\n        }}>\n                                         \n                                    </div>\n                                    <div className=\"col-7 \"  onClick={() => history.push(`/group/${item.groupId}`)}>\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead\">{item.name}</p>\n                                             </div>\n                                         </div>\n                                         \n                                    </div>\n                                    <div className=\"col-2\">\n                                    {notification(Current.notifyGroup[item.groupId],item.groupId)}\n\n                                    </div>\n                                    \n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                    <div className=\"text-center mt-3\">\n                    <Link className=\"btn rounded btn-lg text-white\" to=\"/\">Go Back</Link>\n        \n                    </div>\n                </div>\n               \n        \n            </div>)\n        }\n        else{\n    \n            return(\n    \n                <div className=\"row\">\n                 <div className=\"col-3 text-center\">\n                    <div className=\"row\">\n                        <div className=\"col-12 ml-3\">\n                <div className=\"col-4 text-center\"><Link  to=\"/addgroup\" className=\"btn  rounded\">Create New Group</Link></div>\n    \n    \n                        </div>\n                    </div>\n                </div>\n        <div className=\"col-6\">\n            <h1 className=\"text-center\">you are in no group</h1>\n            <div className=\"text-center mt-3\">\n            <Link className=\"btn  rounded btn-lg text-white\" to=\"/\">Go Back</Link>\n    \n            </div>\n        </div>\n    \n    </div>\n            )\n    \n        }\n    }\n\n\n\n    return (\n        <Base name=\"My Groups\">\n            {list()}\n        </Base>\n    )\n}\n\nexport default GroupList\n","import React,{useState,useEffect,} from 'react'\nimport Base from \"../components/Base\"\nimport InputBox from \"../components/InputBox\"\nimport {auth,db,fireup,storage} from \"../firebase/Fire\"\nimport {useParams,Link} from \"react-router-dom\"\nimport  {readAndCompressImage} from \"browser-image-resizer\"\nimport Config from \"../apiCalls/Config\"\nimport Emoji from \"../components/Emoji\"\n\n\n\nfunction GroupChat() {\n\n    const {groupId} = useParams()\n    const [loading,setLoading] = useState(false)\n    const [recording,setRecording] = useState(false)\n    const [emoji,setEmoji] = useState(false)\n    const[trigger,setTrigger] = useState(false)\n    const[Members,setMembers] = useState([])\n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        photoUrl : \"\"\n        \n    })\n    const [group , setGroup] = useState({\n        name : \"\",\n        icon : \"\",\n        members:[],\n        Messages:[],\n        admin:\"\"\n    })\n    const [singleMessage, setsingleMessage] = useState(\"\")\n\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,photoUrl:item.data().photoUrl,friends:item.data().friends\n                })\n                \n\n               \n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n    function updateScroll(){\n        var element = document.getElementById('qw');\n        element.scrollTop = element.scrollHeight;\n        }\n    \n    useEffect(()=>{\n        preload()\n        \n    },[])\n\n    useEffect(()=>{\n        updateScroll()\n    },[group.Messages])\n\n    useEffect(()=>{\n        db.collection(\"groups\").doc(groupId).get()\n        .then(doc => {\n            setGroup({\n                ...group,name:doc.data().name,icon:doc.data().icon,Messages:doc.data().Messages,members:doc.data().members,admin:doc.data().admin\n            })\n\n            \n           \n        })\n        .catch(err => console.log(err))\n    },[groupId])\n\n    useEffect(()=>{\n        db.collection(\"groups\").doc(groupId)\n        .onSnapshot(function(doc) {\n            setGroup({\n                ...group,name:doc.data().name,icon:doc.data().icon,Messages:doc.data().Messages,members:doc.data().members,admin:doc.data().admin\n            })\n            let Arr = doc.data().members.map(item => item.email)\n            setMembers(Arr)\n            \n        });\n    },[])\n\n    useEffect(()=>{\n        return ()=>{\n            db.collection(\"groupNotify\").doc(groupId).get()\n            .then(item => {\n                db.collection(\"users\").doc(auth().currentUser.email).update({\n                    [\"notifyGroup.\"+groupId]:item.data().total\n                })\n            })\n        }\n    },[])\n\n\n    const insertMessage = (e)=>{\n        e.preventDefault();\n\n        if(singleMessage)\n        {\n            db.collection(\"groups\").doc(groupId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"text\",\n                    sender:Current.email,\n                    name:Current.name,\n                    content:singleMessage,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n                db.collection(\"groupNotify\").doc(groupId).update({\n                    total:fireup.FieldValue.increment(1)\n                }).then(()=>{\n                    setLoading(false)\n                    setsingleMessage(\"\")\n\n                })\n                \n            })\n            .catch(err => {\n                setLoading(false)\n                console.log(err);\n                \n            })\n        }\n      \n    }\n\n    const insertImage = (e)=>{\n        const file = e.target.files[0];\n        setLoading(true);\n        readAndCompressImage(file,Config).then(resizedImage => {\n\n            var metadata = {\n                contentType: file.type\n              };\n              var rand = (Math.floor(Math.random()*100)).toString()\n            var uploadTask = storage.child(`GroupImageMessages/${rand}${file.name}`).put(resizedImage,metadata)\n\n\n                uploadTask.on(\"state_changed\", \n                function(snapshot) {\n                \n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log('Upload is ' + progress + '% done');\n                switch (snapshot.state) {\n                    case \"paused\": \n                    console.log('Upload is paused');\n                    break;\n                    case \"running\": \n                    console.log('Upload is running');\n                    break;\n                }\n                }, function(error) {\n\n                    \n                    console.log(\"ippo:: \",error);\n                    setLoading(false)\n\n                    \n\n           \n                }, function() {\n                // Upload completed successfully, now we can get the download URL\n                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                console.log('File available at', downloadURL);\n                db.collection(\"groups\").doc(groupId).update({\n                    Messages:fireup.FieldValue.arrayUnion({\n                        type:\"image\",\n                        sender:Current.email,\n                        name:Current.name,\n                        content:downloadURL,\n                        time: new Date()\n                       \n                    })\n                })\n                .then(item => {\n                    db.collection(\"groupNotify\").doc(groupId).update({\n                        total:fireup.FieldValue.increment(1)\n                    }).then(()=>{\n    \n                      setLoading(false)\n\n    \n                    })\n                    \n                })\n                .catch(err => {\n                    console.log(err);\n                    setLoading(false)\n                    \n                })\n\n\n             \n               \n               \n\n                });\n                });\n            \n\n        })\n\n    }\n\n    const insertVideo = (e)=>{\n        const file = e.target.files[0];\n        setLoading(true);\n        \n\n            var metadata = {\n                contentType: file.type\n              };\n              var rand = (Math.floor(Math.random()*100)).toString()\n            var uploadTask = storage.child(`GroupVideoMessages/${rand}${file.name}`).put(file,metadata)\n\n\n                uploadTask.on(\"state_changed\", \n                function(snapshot) {\n                \n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log('Upload is ' + progress + '% done');\n                switch (snapshot.state) {\n                    case \"paused\": \n                    console.log('Upload is paused');\n                    break;\n                    case \"running\": \n                    console.log('Upload is running');\n                    break;\n                }\n                }, function(error) {\n\n                    \n                    console.log(\"ippo:: \",error);\n                    setLoading(false)\n\n                    \n\n           \n                }, function() {\n                // Upload completed successfully, now we can get the download URL\n                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                console.log('File available at', downloadURL);\n                db.collection(\"groups\").doc(groupId).update({\n                    Messages:fireup.FieldValue.arrayUnion({\n                        type:\"video\",\n                        sender:Current.email,\n                        name:Current.name,\n                        content:downloadURL,\n                        time: new Date()\n                       \n                    })\n                })\n                .then(item => {\n                    db.collection(\"groupNotify\").doc(groupId).update({\n                        total:fireup.FieldValue.increment(1)\n                    }).then(()=>{\n    \n                      setLoading(false)\n\n    \n                    })\n                    \n                })\n                .catch(err => {\n                    console.log(err);\n                    setLoading(false)\n                    \n                })\n\n\n             \n               \n               \n\n                });\n                });\n            \n\n        \n\n    }\n\n   const insertAudio =(blob)=>{\n    \n    setLoading(true);\n    \n\n        var metadata = {\n            contentType: blob.type\n          };\n          var rand = (Math.floor(Math.random()*100)).toString()\n        var uploadTask = storage.child(`GroupAudioMessages/$Audio{rand}`).put(blob,metadata)\n\n\n            uploadTask.on(\"state_changed\", \n            function(snapshot) {\n            \n            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log('Upload is ' + progress + '% done');\n            switch (snapshot.state) {\n                case \"paused\": \n                console.log('Upload is paused');\n                break;\n                case \"running\": \n                console.log('Upload is running');\n                break;\n            }\n            }, function(error) {\n\n                \n                console.log(\"ippo:: \",error);\n                setLoading(false)\n\n                \n\n       \n            }, function() {\n            // Upload completed successfully, now we can get the download URL\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n            console.log('File available at', downloadURL);\n            db.collection(\"groups\").doc(groupId).update({\n                Messages:fireup.FieldValue.arrayUnion({\n                    type:\"audio\",\n                    sender:Current.email,\n                    name:Current.name,\n                    content:downloadURL,\n                    time: new Date()\n                   \n                })\n            })\n            .then(item => {\n                db.collection(\"groupNotify\").doc(groupId).update({\n                    total:fireup.FieldValue.increment(1)\n                }).then(()=>{\n\n                  setLoading(false)\n\n\n                })\n                \n            })\n            .catch(err => {\n                console.log(err);\n                setLoading(false)\n                \n            })\n\n\n         \n           \n           \n\n            });\n            });\n        \n\n   }\n\n    const insertDocument = (e)=>{\n        const file = e.target.files[0];\n        setLoading(true);\n        \n\n            var metadata = {\n                contentType: file.type\n              };\n              var rand = (Math.floor(Math.random()*100)).toString()\n            var uploadTask = storage.child(`GroupDocumentMessages/${rand}${file.name}`).put(file,metadata)\n\n\n                uploadTask.on(\"state_changed\", \n                function(snapshot) {\n                \n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log('Upload is ' + progress + '% done');\n                switch (snapshot.state) {\n                    case \"paused\": \n                    console.log('Upload is paused');\n                    break;\n                    case \"running\": \n                    console.log('Upload is running');\n                    break;\n                }\n                }, function(error) {\n\n                    \n                    console.log(\"ippo:: \",error);\n                    setLoading(false)\n\n                    \n\n           \n                }, function() {\n                // Upload completed successfully, now we can get the download URL\n                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                console.log('File available at', downloadURL);\n                db.collection(\"groups\").doc(groupId).update({\n                    Messages:fireup.FieldValue.arrayUnion({\n                        type:\"document\",\n                        sender:Current.email,\n                        name:Current.name,\n                        content:downloadURL,\n                        documentName:file.name,\n                        time: new Date()\n                       \n                    })\n                })\n                .then(item => {\n                    db.collection(\"groupNotify\").doc(groupId).update({\n                        total:fireup.FieldValue.increment(1)\n                    }).then(()=>{\n    \n                      setLoading(false)\n\n    \n                    })\n                    \n                })\n                .catch(err => {\n                    console.log(err);\n                    setLoading(false)\n                    \n                })\n\n\n             \n               \n               \n\n                });\n                });\n            \n\n        \n\n    }\n\n\n    \n\n\n    const AddAsMember = (item)=>{\n        \n        db.collection(\"groups\").doc(groupId).update({\n            members:fireup.FieldValue.arrayUnion({\n                name:item.name,\n                email:item.email,\n                photoUrl:item.photoUrl\n            })\n        })\n        .then(doc => {\n            db.collection(\"users\").doc(item.email).update({\n                groups:fireup.FieldValue.arrayUnion({\n                    name:group.name,\n                    icon:group.icon,\n                    groupId:groupId,\n                    admin:false\n                }),\n                [\"notifyGroup.\"+groupId]:0\n\n            })\n            .then(data => {\n                db.collection(\"groupNotify\").doc(groupId).update({\n                    members:fireup.FieldValue.arrayUnion(item.email)\n                })\n                .then(()=>{\n                    console.log(\"added to group successfully\");\n\n                })\n                \n            })\n            .catch(err => console.log(err))\n        })\n        .catch(err => console.log(err))\n        \n\n    }\n\n\n    const AddMember = ()=>(\n        \n        group.admin === Current.email ? (\n            <div className=\"row\" style={{display: !trigger ? \"block\" : \"none\" }}>\n            <div className=\"col-12 text-center mt-2\">\n                    <button className=\"btn rounded clock\" onClick={()=>{setTrigger(true)}}>Add Member</button>\n                    \n            </div>\n            \n        </div>\n        ) : (\"\")\n    )\n\n    const putTime = (time)=>{\n        return(\n            time.toLocaleString('en-US', { hour: 'numeric',minute:'numeric', hour12: true })\n          );\n    } \n\n    const putDate = ()=>{\n        const date = new Date()\n        return(\n            date.toLocaleString('en-US', { day:'numeric',month:'numeric',year:'numeric' })\n          );\n    } \n\n\n    const loadingMessage = ()=>{\n      \n        \n        if(loading === true)\n        {\n            return(\n                <div className=\"row mt-3\">\n                    <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  rounded\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\",backgroundColor:\"yellow\"}}  >\n                            \n                                \n                                    <p>sending....</p>\n                            </div>\n                            \n                        </div>\n                    </div>\n            ) \n        }\n    }\n    const recordingMessage =()=>{\n\n        if(recording === true)\n        {\n            return(\n                <div className=\"row mt-3\">\n                    <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  rounded bg-success\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\"}}  >\n                            \n                                \n                                    <p>Reocording....</p>\n                            </div>\n                            \n                        </div>\n                    </div>\n            ) \n        }\n\n    }\n        \n    \n\n\n    const displayMessage = (type,content,name)=>{\n        if(type === \"text\")\n        {\n            return(\n                  <div>\n                 <p className=\"lead\">{content}</p>\n                </div> \n\n            )\n        }\n        else if(type === \"image\")\n        {\n            return(\n                \n                <a  target=\"_blank\" href={content}>\n                <img  src={content} style={{maxHeight:\"300px\",maxWidth:\"300px\"}} alt=\"\"/>\n                </a>\n                \n                \n            )\n        }\n        else if(type === \"video\")\n        {\n            return(\n                <>\n                <a  target=\"_blank\" href={content}>\n                \n                <video width=\"320\" height=\"240\"  src={content} controls>\n                \n                asdasd\n                </video>\n                    \n           \n                </a>\n                <i className=\"fa fa-video-camera\" style={{display:\"block\"}}></i>\n                </>\n                \n            )\n        }\n        else if(type === \"audio\")\n        {\n           return(  \n                <audio src={content} controls=\"controls\" />\n        )\n        }\n        else\n        {\n            return(\n                <div className=\"col-12 text-center\">\n                <a  target=\"_blank\" href={content}>\n                \n                <i className=\"fa fa-file fa-4x text-dark document-icon\"></i> \n           \n                </a>\n                <p>{name}</p>\n                </div>\n            )\n        }\n\n    }\n\n    const deleteMessage =(item) => {\n        \n        db.collection(\"groups\").doc(groupId).update({\n            Messages:fireup.FieldValue.arrayRemove(item)\n        }).then(()=>{\n            \n            \n            console.log(\"deleted successfully\")\n        })\n    }\n\n    const removeFromGroup = async(item)=>{\n\n        let newList = await group.members.filter((member) => member !== item)\n\n        \n\n        db.collection(\"groups\").doc(groupId).update({\n            members:newList\n        }).then(()=>{\n            db.collection(\"users\").doc(item.email).get()\n            .then(async (details) =>{\n                let groupList = await details.data().groups.filter(data => data.groupId !== groupId )\n                    \n                \n                \n                db.collection(\"users\").doc(details.data().email).update({\n                    groups:groupList\n                })\n                .then(()=>{console.log(\"alll done successfully\")})\n\n            })\n            .catch(err => console.log(err))\n\n            \n        })\n        .catch(err => console.log(err))\n    }\n\n    \n\n\n    const mainElement = ()=>{\n\n        var day = \"\"\n        const checkDate =(date)=>{\n            \n            if(day !== date.getDate())\n            {\n\n                if(new Date().getDate() === date.getDate())\n                {\n                    day = date.getDate()\n                    return(\n                    \n                        <div className=\"col-12 text-center\">\n                            <p className=\"p-1\" style={{display:\"inline-block\",backgroundColor:\"#99AAAB\",borderRadius:\"5px\"}}>Today</p>\n                        </div>\n                    \n                )\n\n                }\n                day = date.getDate()\n                return(\n                    \n                        <div className=\"col-12 text-center\">\n                            <p className=\"p-1\" style={{display:\"inline-block\",backgroundColor:\"#99AAAB\",borderRadius:\"5px\"}}>{date.toLocaleString('en-US', { day:'numeric',month:'long',year:'numeric' })}</p>\n                        </div>\n                    \n                )\n            }\n            \n\n        }\n\n        return(\n        !trigger ? (\n            <div className=\"col-8 \">\n            \n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        <div className=\"col-4\">\n                            <h4 className=\"lead\">Messages:</h4>\n                        </div>\n                        <div className=\"col-8\">\n                            <h4 className=\"text-right lead\">Date:{putDate()}</h4>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12\">\n\n                <div id=\"qw\" className=\"fix mr-auto ml-auto text-dark\">\n                    \n                  {group.Messages.map((item,index) => {\n                      \n\n                    \n                      return(\n                        \n                    item.sender === Current.email ? \n                    (  \n                        \n                        <div key={index} className=\"row mt-3\">\n                        {checkDate(item.time.toDate())}\n                        <div className=\"col-7 offset-5 text-right \">\n                            <div className=\" mr-3 p-2  rounded\" style={{wordWrap:\"break-word\",display:\"inline-block\",maxWidth:\"100%\",backgroundColor:\"#EEAEEE\"}}\n                             onMouseOver={()=>{\n                            document.getElementById(index).style.display=\"block\"\n                    }} onMouseOut={()=>{document.getElementById(index).style.display=\"none\"}}   >\n                                <div>\n                                    {displayMessage(item.type,item.content,item.documentName)}\n                                </div>\n                                <div  > \n                                <p className=\"text-left ml-1\"  style={{fontSize:\"8px\",color:\"black\"}}>\n                                {putTime(item.time.toDate())}\n                                </p>\n                                <div className=\"row\" style={{display:\"none\"}} id={index}>\n                                    <div className=\"col-12 text-right\">\n                                        <i onClick={()=>{deleteMessage(item)}} className=\"fa fa-trash small-icons\"></i>\n                                    </div>\n                                </div>\n                                </div>\n                            </div>\n                            \n                        </div>\n                    </div>) \n                    :  (<div key={index} className=\"row mt-3\">\n                    {checkDate(item.time.toDate())}\n                        <div className=\"col-7 \">\n                            <div className=\"lead ml-3 rounded\" style={{wordWrap:\"break-word\",maxWidth:\"100%\",display:\"inline-block\",backgroundColor:\"#DAE0E2\"}} >\n                                <div className=\"row\" style={{fontSize:\"13px\",marginLeft:\"5px\"}}>{item.name}</div>\n                                <div className=\"p-3 \">\n                                {displayMessage(item.type,item.content,item.documentName)}\n\n\n                                </div>\n                                <div className=\"mr-1\" > \n                                <p className=\"text-right\" style={{fontSize:\"8px\",color:\"black\"}}>\n                                {putTime(item.time.toDate())}\n                                </p></div>\n                            </div>\n                        </div>\n                    </div>)\n\n)})}\n{loadingMessage()}\n{recordingMessage()}\n<Emoji emoji={emoji} singleMessage={singleMessage} setsingleMessage={setsingleMessage} ></Emoji>\n<div className=\"clear\"></div>\n\n\n                </div>\n                <InputBox insertMessage={insertMessage} insertImage={insertImage} insertVideo={insertVideo} \n                insertDocument = {insertDocument} setRecording ={setRecording} emoji={emoji} setEmoji={setEmoji}\n                singleMessage={singleMessage} setsingleMessage={setsingleMessage} insertAudio = {insertAudio}\n                ></InputBox>\n\n                </div>\n            </div>\n           \n            \n        </div>\n          ):(\n              <div className=\"col-7 ml-3 mt-3\" id=\"qw\">\n              \n              <ul className=\"list-group fix\" style={{maxHeight:\"80vh\"}} >\n                    {Current.friends.map(item =>{\n                        return(\n                            !Members.includes(item.email) ? (\n                                <li key={item.email} className=\"list-group-item friend\" style={{color:\"black\"}}>\n                                <div className=\"row\">\n                                    <div className=\"col-2\" style={{  \n        backgroundImage: \"url(\" + item.photoUrl+ \")\",\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n        }}>\n                                         \n                                    </div>\n                                    <div className=\"col-7 \">\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead\">{item.name}</p>\n                                             </div>\n                                         </div>\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead \">{item.email}</p>\n                                             </div>\n                                         </div>\n                                    </div>\n                                    <div className=\"col-2\">\n                                            <button onClick={()=>{\n                                                AddAsMember(item)\n                                            }} className=\"btn btn2\">Add</button>\n                                    </div>\n                                </div>\n                            </li>\n                            ) : (\"\")\n                        )\n                    })}\n\n                    </ul>\n                    <div className=\"text-center\">\n                    <button onClick={()=>{setTrigger(false)}} className=\"btn btn-lg rounded mt-3\">back</button>\n\n                    </div>\n              \n                   \n              </div>\n             \n          )\n    ) }\n\n\n\n\n    const chatBox = ()=> {\n        return(\n            <div className=\"row\">\n        <div className=\"col-4\">\n            <div className=\"row\">\n            <div className=\"col-12 mt-3 text-center\"  >\n            <img className=\"groupIcon\"  src={group.icon} alt=\"\"/>\n                \n            </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-12 text-center mt-2\">\n                        <h4  style={{color:\"black\"}}>{group.name}</h4>\n                </div>\n                \n            </div>\n            {AddMember()}\n\n            <ul className=\"list-group fix mt-3\" style={{maxHeight:\"50vh\"}}>\n            <div className=\"bg-white p-2\">\n               \n            <p className=\"text-dark lead\">Group Participants</p>\n            </div>\n                        { group.members.map(item => (\n                            <li key={item.email} onMouseOver={()=>{\n                                if(Current.email === group.admin )\n                                    {\n                                        document.getElementById(item.email).style.display=\"block\"\n                                    }\n                            }} onMouseOut={()=>{\n                                    if(Current.email === group.admin)\n                                    {\n                                        document.getElementById(item.email).style.display=\"none\"\n                                    }\n                                \n                            }} className=\"list-group-item friend\" style={{color:\"black\"}}>\n                                <div className=\"row\">\n                                    <div className=\"col-2\" style={{  \n        backgroundImage: \"url(\" + item.photoUrl+ \")\",\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n        }}>\n                                         \n                                    </div>\n                                    <div className=\"col-7 \" >\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead\">{item.name}</p>\n                                             </div>\n                                         </div>\n                                         \n                                    </div>\n                                    \n                                </div>\n                                {Current.email === group.admin ? (\n                                    <div id={item.email} style={{display:\"none\"}} className=\"col-12 text-center\">\n                                    <button onClick={()=>{removeFromGroup(item)}} className=\" btn  btn2 rounded\">Remove from Group</button>\n                                </div>\n                                ):(\"\")}\n                            </li>\n                        ))}\n                    </ul>\n\n           \n        </div>\n            {mainElement()}\n        \n\n        </div>\n           \n        )\n    }\n\n\n\n\n\n    return (\n        <Base  >\n                {chatBox()}\n               \n        \n        </Base>\n    )\n}\n\nexport default GroupChat\n","import React,{useState,useEffect} from 'react'\nimport Base from \"../components/Base\"\nimport {auth,db} from \"../firebase/Fire\"\nimport {Link,useHistory} from \"react-router-dom\"\nfunction BlockList() {\n    let history = useHistory()\n    const [Current , setCurrent] = useState({\n        name : \"\",\n        email : \"\",\n        friends :[],\n       \n    })\n\n    const preload = async()=>{\n\n        const current = await auth().currentUser\n    \n        db.collection(\"users\").doc(current.email).get()\n        .then(item => {\n            if(item.exists)\n            {\n    \n                setCurrent({\n                    ...Current,name:item.data().name,email:item.data().email,friends:item.data().friends,\n                })\n            }\n            else{\n                console.log(\"current user Not Available\");\n                \n            }\n        })\n        .catch(err => {\n            console.log(err);\n            \n        })\n    \n    }\n    \n    useEffect(()=>{\n        preload()\n    },[])\n\n    const unBlock = async(friendemail)=>{\n\n        let newList = await Current.friends.map((item)=>{\n            if(item.email === friendemail)\n            {\n                item.blocked = false\n            }\n            return(item)\n\n        })\n\n        db.collection(\"users\").doc(Current.email).update({\n            friends:newList\n        })\n        .then(()=>{\n            alert(\"unblocked\");\n            setTimeout(()=>{\n                history.push(\"/\")\n            },1000)\n            \n        })\n\n    }\n\n    const list = ()=>{\n        \n        \n        if(Current.friends.length > 0)\n        {\n                return(<div className=\"row\">\n               \n                <div className=\"col-6  offset-3\">\n                    <ul className=\"list-group\">\n                        { Current.friends.map(item => (\n                            item.blocked? (\n                                <li key={item.email} className=\"list-group-item friend\" style={{color:\"black\"}}>\n                                <div className=\"row\">\n                                    <div className=\"col-2\" style={{  \n        backgroundImage: \"url(\" + item.photoUrl+ \")\",\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n        }}>\n                                         \n                                    </div>\n                                    <div className=\"col-7 \"  >\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead\">{item.name}</p>\n                                             </div>\n                                         </div>\n                                         <div className=\"row select\">\n                                             <div className=\"col\">\n                                                 <p className=\"lead \">{item.email}</p>\n                                             </div>\n                                         </div>\n                                    </div>\n                                    <div className=\"col-3 text-center\">\n                                        <button  onClick={()=>{unBlock(item.email)}} className=\"btn btn2 rounded mt-2\" >Unblock</button>\n                                    </div>\n                                   \n                                </div>\n                            </li>\n                            ): (\"\")\n                        ))}\n                    </ul>\n                    <div className=\"text-center mt-3\">\n                    <Link className=\"btn rounded btn-lg text-white\" to=\"/\">Go Back</Link>\n        \n                    </div>\n                </div>\n        \n            </div>)\n        }\n        else{\n\n            return(\n\n                <div className=\"row\">\n                <div className=\"col-3 text-center\">\n                    <div className=\"row\">\n                        <div className=\"col-12 ml-3\">\n                <div className=\"col-4 text-center\"><Link  to=\"/addfriend\" className=\"btn btn2 rounded\">Add Friend</Link></div>\n\n\n                        </div>\n                    </div>\n                    </div>\n        <div className=\"col-6\">\n            <h1 className=\"text-center\">No Friends in the list </h1>\n            <div className=\"text-center mt-3\">\n            <Link className=\"btn rounded btn-lg text-white\" to=\"/\">Go Back</Link>\n\n            </div>\n        </div>\n\n    </div>\n            )\n\n        }\n}\n    return (\n        <Base name=\"Blocked Friends\">\n            {list()}\n        </Base>\n    )\n}\n\nexport default BlockList\n","import React,{useContext} from \"react\"\nimport {Redirect,Route} from \"react-router-dom\"\nimport {MyContext}  from  \"./Context\"\n\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n  const {authenticated} = useContext(MyContext)\n\n    return (\n      <Route\n        {...rest}\n        render={(props) => authenticated === true\n          ? <Component {...props} />\n          : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />}\n      />\n    )\n  }\n\n  export default PrivateRoute","import React,{useContext} from \"react\"\nimport {Redirect,Route} from \"react-router-dom\"\nimport {MyContext}  from  \"./Context\"\n\n\nfunction PublicRoute({ component: Component, ...rest }) {\n  const {authenticated} = useContext(MyContext)\n\n    return (\n      <Route\n        {...rest}\n        render={(props) => authenticated === false\n          ? <Component {...props} />\n          : <Redirect to={{ pathname: '/', state: { from: props.location } }} />}\n      />\n    )\n  }\n\n  export default PublicRoute","import React,{useState,useEffect} from 'react'\nimport {BrowserRouter as Router,Route,Switch} from \"react-router-dom\"\nimport {auth} from \"./firebase/Fire\"\nimport {MyContext} from \"./Context\"\nimport {useHistory} from \"react-router-dom\"\nimport {db} from \"./firebase/Fire\"\n//Pages\nimport Home from \"./pages/Home\"\nimport Login from \"./pages/Login\"\nimport Signup from \"./pages/Signup\"\nimport Signout from \"./pages/Signout\"\nimport Chat from \"./pages/Chat\"\nimport AddFriend from \"./pages/AddFriend\"\nimport AddGroup from \"./pages/AddGroup\"\nimport FriendList from \"./pages/FriendList\"\nimport GroupList from \"./pages/GroupList\"\nimport GroupChat from \"./pages/GroupChat\"\nimport BlockList from \"./pages/BlockList\"\n\n//private routes\nimport PrivateRoute from \"./PrivateRoute\"\nimport PublicRoute from \"./PublicRoute\"\n\nfunction Routes() {\n    var history = useHistory() \n    const [authenticated, setAuthenticated] = useState(false)\n    const [userId, setUserId] = useState()\n\n    useEffect(() => {\n        auth().onAuthStateChanged(user => {\n            if(user)\n            { \n                db.collection(\"users\").doc(auth().currentUser.email).update({\n                    online:true\n                 }\n                 ).then(()=>{\n                     console.log(\"logged In\");\n                     \n                 })\n                setAuthenticated(true)\n                setUserId(user.uid)\n            }\n            else\n            {\n               \n                \n                setAuthenticated(false)\n            }\n        })\n    }, [])\n\n\n    const Routings =()=>(\n\n        <Router>\n                <Switch>\n                <MyContext.Provider value={{authenticated,userId}}>\n                    <PrivateRoute path=\"/\" exact component={Home} ></PrivateRoute>\n                    <PrivateRoute path=\"/chat/:friendemail/:chatId\" exact component={Chat}></PrivateRoute>\n                    <PrivateRoute path=\"/addfriend\" exact  component={AddFriend} ></PrivateRoute>\n                    <PrivateRoute path=\"/signout\" exact  component={Signout} ></PrivateRoute>\n                    <PrivateRoute path=\"/addgroup\" exact  component={AddGroup} ></PrivateRoute>\n                    <PrivateRoute path=\"/friendlist\" exact component={FriendList}></PrivateRoute>\n                    <PrivateRoute path=\"/grouplist\" exact component={GroupList}></PrivateRoute>\n                    <PrivateRoute path=\"/group/:groupId\" exact component={GroupChat}></PrivateRoute>\n                    <PrivateRoute path=\"/blocklist\" exact component={BlockList}></PrivateRoute>\n                    <PublicRoute path=\"/login\"   exact component={Login} ></PublicRoute>\n                    <PublicRoute path=\"/signup\" exact  component={Signup} ></PublicRoute>\n\n\n                </MyContext.Provider>\n\n                </Switch>\n        </Router>\n\n    )\n\n    return (\n        <Routings></Routings>\n    )\n}\n\nexport default Routes\n","import React from \"react\"\nimport Routes from \"./Routes\"\nimport ReactDOM from \"react-dom\"\nimport \"./styles.css\"\n\n\nReactDOM.render(\n    <Routes></Routes>,document.getElementById(\"root\")\n)"],"sourceRoot":""}